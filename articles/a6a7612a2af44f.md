---
title: "GitHubã®SSH Keys & GPG Keysã®ç™»éŒ²"
emoji: "ğŸ”"
type: "tech"
topics:
  - "github"
  - "homebrew"
  - "macos"
  - "termux"
  - "ish"
published: true
published_at: "2022-07-30 04:39"
publication_name: "74"
---

:::message alert
ã“ã®è¨˜äº‹ã¯æ›´æ–°ã•ã‚Œã¦ã¾ã›ã‚“ã€‚æƒ…å ±ãŒå¤ã„ãƒ»é–“é•ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã®ã§ã€GitHubã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã”å‚ç…§é ‚ã„ãŸä¸Šã§ãŠèª­ã¿ãã ã•ã„ã€‚
:::  

https://docs.github.com/ja/authentication/connecting-to-github-with-ssh  
https://docs.github.com/ja/authentication/managing-commit-signature-verification/generating-a-new-gpg-key  

# ãªã«ã‚’ã—ãŸã„ã®ã‹

ç§ã®æŒã£ã¦ã„ã‚‹
- Macbook Pro
- iPad Air
- Black Shark 4

ã§GitHubã«SSHæ¥ç¶šã¨ã€ç½²åã‚’è¡Œã„ãŸã„ã§ã™ã€‚SSHã«é–¢ã—ã¦ã¯ã„è¨€ã‚ãšã‚‚ãŒãªã¨ã„ã†æ„Ÿã˜ã§ã™ãŒã€ç½²åã¯ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æœ¬äººãŒCommitã—ãŸã“ã¨ã‚’è¨¼æ˜ã—ã¦ãã‚Œã¾ã™ã€‚Verifiedã¨è¡¨ç¤ºã•ã‚Œã¦ã€æ°—åˆ†ãŒã‚ˆããªã‚Šã¾ã™ï¼ˆãã†ã„ã†ãƒ¡ãƒªãƒƒãƒˆã˜ã‚ƒãªã„ï¼‰


# Mac

![](https://storage.googleapis.com/zenn-user-upload/811a0400b04d-20220726.png)
[MacBook Pro (13-inch, 2017, Thunderbolt 3ãƒãƒ¼ãƒˆx 2)](https://support.apple.com/kb/SP754?locale=ja_JP)

```sh
% brew install gnupg

% gpg --version
gpg (GnuPG) 2.3.7
libgcrypt 1.10.1

% ssh -V
OpenSSH_8.6p1, LibreSSL 3.3.6
```
https://alacritty.org/
ã¨ã‚Šã‚ãˆãšGPGã¨OpenSSHã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚Macã«ã¯æ¨™æº–ã§OpenSSHãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã¿ãŸã„ã§ã™ã€‚SSH Keyã«ã‚‚GPG Keyã«ã‚‚ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä½¿ã†ã‚“ã§ã™ãŒã€ä»Šå›ã¯GitHubãŒç”Ÿæˆã—ã¦ãã‚Œã‚‹ã‚‚ã®ã‚’ä½¿ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚

https://github.com/settings/emails


[github-sshkey]: https://docs.github.com/ja/authentication/connecting-to-github-with-ssh
## SSHéµã®ä½œæˆ

å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚è€ƒã«ã‚„ã£ã¦ã¿ã¾ã™ã€‚

[GitHub ã« SSH ã§æ¥ç¶šã™ã‚‹][github-sshkey]

```sh
% mkdir .ssh
% ssh-keygen -t ed25519 -C "mail"

Enter file in which to save the key (/Users/x/.ssh/id_ed25519): /Users/x/.ssh/hoge
...
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
...
Your identification has been saved in /Users/x/.ssh/hoge
Your public key has been saved in /Users/x/.ssh/hoge.pub
```
å¤šå°‘çœç•¥ã—ã¾ã—ãŸãŒã€ã“ã‚“ãªæ„Ÿã˜ã§ã™ã­ã€‚é¢å€’ãªã®ã§ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºã¯è¨­å®šã—ã¾ã›ã‚“ã€‚è¨­å®šã—ãŸã‘ã‚Œã°å…¥åŠ›ã™ã‚Œã°ã§ãã¾ã™ã€‚ãŸã ã—ã€æ¥ç¶šã®éš›ã«æ¯åº¦ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºã®å…¥åŠ›ãŒè¦æ±‚ã•ã‚Œã¾ã™(èª¿ã¹ã¦ã¾ã›ã‚“ãŒã€ç´°ã‹ã„è¨­å®šã‚‚ã§ãã‚‹ã¿ãŸã„ã§ã™ï¼‰ã€‚hogeã®ã¨ã“ã‚ã¯å¥½ããªã‚‚ã®ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚github_keyã¨ã‹åˆ†ã‹ã‚Šã‚„ã™ã„ã‚‚ã®ã§ã„ã„ã‚“ã˜ã‚ƒãªã„ã§ã—ã‚‡ã†ã‹ã€‚


## SSHéµã®ç™»éŒ²

```sh
% pbcopy < ~/.ssh/hoge.pub
```
ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«å…¬é–‹éµã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚
pbcopyãŒãªã‘ã‚Œã°ã€`cat ~/.ssh/hoge'ã§è¡¨ç¤ºã•ã‚ŒãŸã‚‚ã®ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™

https://github.com/settings/keys

ã‚ã¨ã¯ã€SSH Keyã®ã»ã†ã«è²¼ã‚Šä»˜ã‘ã‚‹ã ã‘ã§ã™ã€‚æ”¹è¡Œã‚„ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã£ã¦ã„ã‚‹ã¨ãƒ€ãƒ¡ã¿ãŸã„ã§ã™ã€‚


## configã®ä½œæˆ

```sh
% touch ~/.ssh/config
% nvim ~/.ssh/config
```
configã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ä»¥ä¸‹ã‚’æ›¸ãè¾¼ã¿ã¾ã™ã€‚

```config
Host github github.com
  HostName github.com
  User git
  IdentityFile ~/.ssh/hoge
  AddKeysToAgent yes
  UseKeychain yes
```
åˆ¥ã«vimã¯ä½¿ã‚ãªãã¦ã‚‚ã„ã„ã§ã™ã€‚ãŠå¥½ããªã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ç”¨ã•ã‚ŒãŸã‚‰ã„ã„ã¨æ€ã„ã¾ã™ã€‚


## æ¥ç¶šãƒ†ã‚¹ãƒˆ

```sh
% ssh -T github
```
`Are you sure you want to continue connecting (yes/no/[fingerprint])?`ã®ã‚ˆã†ãªè­¦å‘Š(?)ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ãŒã€æ°—ã«ã›ãšyesã¨å…¥åŠ›ã—ã¾ã™ã€‚æœ€çµ‚çš„ã«`Hi @user! You've successfully authenticated, but GitHub does not provide shell access.`ã¨ã„ã†æ–‡ç« ãŒè¡¨ç¤ºã•ã‚Œã¦ã‚Œã°SSHã§ã®æ¥ç¶šã¯OKã§ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/93990c8b78d7-20220730.png)
ä¸€åº¦ã§ã‚‚ä½¿ç”¨ã•ã‚Œã‚Œã°ã€ã“ã®ã‚ˆã†ã«ç·‘ã®è¡¨ç¤ºã«ãªã‚‹ã¿ãŸã„ã§ã™ã€‚(`ssh -T github`ã§ã¯ãªã‚‰ãªã„)


[github-gpgkey]: https://docs.github.com/ja/authentication/managing-commit-signature-verification/generating-a-new-gpg-key
## GPGéµã®ä½œæˆ

[ã‚³ãƒŸãƒƒãƒˆç½²åã®æ¤œè¨¼ã‚’ç®¡ç†ã™ã‚‹][github-gpgkey]

```sh
% gpg --full-generate-key

ã”å¸Œæœ›ã®éµã®ç¨®é¡ã‚’é¸æŠã—ã¦ãã ã•ã„:
...
  (10) ECC (ç½²åã®ã¿)
...
ã‚ãªãŸã®é¸æŠã¯? 10
...
ã“ã‚Œã§æ­£ã—ã„ã§ã™ã‹? (y/N) y
```
éµã®ç¨®é¡ã¯ECCã®ç½²åã®ã¿ã‚’é¸æŠã—ã¦ã€å¾Œã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã™ã€‚

```sh
% gpg --list-secret-keys --keyid-format=long

...
sec   ed25519/a 2022-07-29 [SC]
      b
uid                 [  ç©¶æ¥µ  ] name <mail>
```
ä»Šå›ã¯SubKeyã§ç½²åã‚’è¡Œã„ã¾ã™ã€‚`sec   ed25519/a 2022-07-29 [SC]`ã¨ã„ã†è¡Œã®aã«ã‚ãŸã‚‹éƒ¨åˆ†ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚


## SubKeyã®ä½œæˆ

```sh
% gpg --edit-key a
> addkey

ã”å¸Œæœ›ã®éµã®ç¨®é¡ã‚’é¸æŠã—ã¦ãã ã•ã„:
...
  (10) ECC (ç½²åã®ã¿)
...
ã‚ãªãŸã®é¸æŠã¯? 10
...
ã“ã‚Œã§æ­£ã—ã„ã§ã™ã‹? (y/N) y
æœ¬å½“ã«ä½œæˆã—ã¾ã™ã‹? (y/N) y

> save

% gpg --list-secret-keys --keyid-format=long
...
sec   ed25519/a 2022-07-29 [SC]
      b
uid                 [  ç©¶æ¥µ  ] name <mail>
ssb   ed25519/c 2022-07-29 [S]
```
ç¢ºèªã™ã‚‹ã¨ã€ã—ã£ã‹ã‚Šã¨SubKeyãŒä½œæˆã§ãã¦ã„ã¾ã™ã€‚æ¬¡ã¯éµã‚’ç™»éŒ²ã—ã¾ã™ãŒã€`sec   ed25519/a 2022-07-29 [SC]`ã¨ã„ã†è¡Œã®aã«ã‚ãŸã‚‹éƒ¨åˆ†ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚


## GPGéµã®ç™»éŒ²

```sh
% gpg --armor --export a
-----BEGIN PGP PUBLIC KEY BLOCK-----
...
-----END PGP PUBLIC KEY BLOCK-----
```
å‡ºåŠ›ã•ã‚ŒãŸå…¨ã¦ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚`-----BEGIN PGP PUBLIC KEY BLOCK-----`ã€€ã€œã€€`-----END PGP PUBLIC KEY BLOCK-----`ã¾ã§ã§ã™ã­ã€‚

https://github.com/settings/keys


## ç½²åã®è¨­å®š

```sh
% git config --global commit.gpgsign true
% git config --global user.signingkey c
% git config --global user.name name
% git config --global user.email mail
```
ã•ã£ãä½¿ã£ãŸåå‰ã¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¨­å®šã—ã¾ã™ã€‚

```sh
% git commit -S -m "message"
```
è‡ªå‹•ã§ç½²åã—ã¦ãã‚Œãªã‹ã£ãŸå ´åˆã¯ã€`-S`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã§ãã¾ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/7a405bcf3f9e-20220729.png)
ä¸‹ãŒã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ãªã„ã€ä¸ŠãŒã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ãŸã‚‚ã®ã§ã™ã€‚ç½²åã‚’ã™ã‚‹ã¨ã€åå‰ã§ã¯ãªããƒ¦ãƒ¼ã‚¶ãƒ¼IDã«ç½®ãæ›ã‚ã‚‹ã‚ˆã†ã§ã™ã€‚



# Termux

![](https://storage.googleapis.com/zenn-user-upload/114b59081350-20220729.jpg)
[Black Shark 4 Specs - Gaming Smartphone](https://global.blackshark.com/pages/specs-blackshark4)

```sh
> pkg upgrade
> pkg install git
> pkg install openssh
> pkg install gnupgsh

> gpg --version
gpg (GnuPG) 2.3.7
libgcrypt 1.10.1

> ssh -V
OpenSSH_9.0p1, OpenSSL 3.0.3 3 May 2022
```
https://termux.dev/en/
Androidã®Termuxã¨ã„ã†ã‚¢ãƒ—ãƒªã§ã™ã€‚ä»–ã®ç«¯æœ«ã‚ˆã‚Šå…ˆã«ä½¿ã£ã¦ã„ãŸã®ã§ã€ç’°å¢ƒæ§‹ç¯‰ãŒã™ã“ã—é€²ã‚“ã§ã¾ã™ã€‚


## SSHã®ç›¸é•ç‚¹

UseKeychainã®è¨­å®šãŒä½¿ãˆãªã„ã¿ãŸã„ã§ã™ã€‚GitHubã®å…¬å¼ã§ã¯ã€`IgnoreUnknown UseKeychain`ã‚’è¨˜è¿°ã™ã‚‹ã‚ˆã†æ›¸ã‹ã‚Œã¦ã„ã¾ã—ãŸãŒã€æ¶ˆã—ã¦ã‚‚ã„ã‘ã¾ã—ãŸ(å•é¡Œãªã‘ã‚Œã°è¨˜è¿°ã—ãŸæ–¹ãŒã„ã„ã¨æ€ã„ã¾ã™ï¼‰ã€‚ã¡ãªã¿ã«ã€IgnoreUnknownã‚’è¨˜è¿°ã™ã‚‹ã¨ãã€UseKeychainã‚ˆã‚Šä¸Šã«è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚


## GPGã®ç›¸é•ç‚¹

```sh
gpg --batch --passphrase='' --quick-gen-key "name <mail>" ed25519 sign none
```
å¯¾è©±ãƒ¢ãƒ¼ãƒ‰ã§ã¯ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºãªã—ã§ç™»éŒ²ã§ããªã„ã‚ˆã†ãªã®ã§ã€`--batch`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã„ã¾ã—ãŸã€‚subkeyã¯ä½œã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ã‚ã¨ã¯åŒã˜ã§ã™ã€‚ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºãŒå¿…è¦ãªã‚‰ã°ã€`--passphrase=''`ã®éƒ¨åˆ†ã‚’å¤‰æ›´ã—ã¾ã™ã€‚



# iSH

![](https://storage.googleapis.com/zenn-user-upload/dca470716c61-20220729.png)
[iPad Air (ç¬¬5ä¸–ä»£)](https://support.apple.com/kb/SP866?locale=ja_JP)

```
# pkg update
# pkg upgrade
# pkg add git
# pkg add gnupg
# pkg add openssh

# gpg --version
gpg (GnuPG) 2.2.31
libgcrypt 1.9.4

# ssh -V
OpenSSH_8.6p1, OpenSSL 1.1.1q  5 Jul 2022
```
https://ish.app/
iOS(iPadOS)ã®iSHã¨ã„ã†ã‚¢ãƒ—ãƒªã§ã™ã€‚ãªã‚“ã‹å´©ã‚Œã¦ã¾ã™ã­w


## SSHã®ç›¸é•ç‚¹

Termuxã¨åŒã˜ã§ã™ã€‚


## GPGã®ç›¸é•ç‚¹

Termuxã¨åŒã˜ã§ã™ã€‚



# ã‚ˆã‚Šå¼·ã„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

ç§ã¯ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’è¨­å®šã—ã¦ã„ã¾ã›ã‚“ãŒã€æœ¬æ¥ã¯è¨­å®šã—ãŸæ–¹ãŒè‰¯ã„ã§ã™ã€‚ãŸã ã—ã€çŸ­ã„ã‚‚ã®ã¯ã‚ã¾ã‚Šæ„å‘³ãŒãªã„ã§ã™(ç·å½“ãŸã‚Šã§ãƒ’ãƒƒãƒˆã™ã‚‹å¯èƒ½æ€§ãŒé«˜ã„)ã€‚ç›®å®‰ã¨ã—ã¦ã¯12æ–‡å­—ä»¥ä¸Šã¨ã„ã£ãŸã¨ã“ã‚ã§ã—ã‚‡ã†ã‹ã€‚å¿ƒã«ä½™è£•ãŒã‚ã‚‹æ–¹ã¯è¨­å®šã—ã¦ã¿ã‚‹ã¨ã„ã„ã¨æ€ã„ã¾ã™ã€‚

# æœ€å¾Œã«

ä½•ã‹æŒ‡æ‘˜ã‚„ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã€ãã®ä»–è«¸ã€…ãŒã‚ã‚Œã°ã€Discussionã‹ã€[twitter](https://twitter.com/Cbrnex)ã¾ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚